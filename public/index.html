<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0a1a">
  <title>üöÄ Crash Rocket</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div id="app">
    <!-- ===== HEADER ===== -->
    <header class="header">
      <div class="header-left">
        <div class="logo">üöÄ CRASH</div>
      </div>
      <div class="header-right">
        <div class="balance-box" id="balanceBox">
          <span class="balance-icon">üí∞</span>
          <span class="balance-amount" id="balanceAmount">0.00</span>
          <span class="balance-currency">TON</span>
        </div>
        <button class="btn-deposit" id="btnOpenDeposit">+</button>
      </div>
    </header>

    <!-- ===== HISTORY BAR ===== -->
    <div class="history-bar" id="historyBar">
      <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>

    <!-- ===== GAME CANVAS ===== -->
    <div class="game-container">
      <canvas id="gameCanvas"></canvas>
      <div class="game-overlay" id="gameOverlay">
        <div class="multiplier-display" id="multiplierDisplay">
          <span class="multiplier-value" id="multiplierValue">1.00</span>
          <span class="multiplier-x">x</span>
        </div>
        <div class="game-status" id="gameStatus">–û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫...</div>
        <div class="countdown" id="countdown" style="display:none">
          <span id="countdownValue">5</span>
        </div>
      </div>
      <!-- Gift Preview Popup -->
      <div class="gift-preview" id="giftPreview" style="display:none">
        <div class="gift-preview-content">
          <div class="gift-emoji" id="giftEmoji">üéÅ</div>
          <div class="gift-name" id="giftName">Gift Name</div>
          <div class="gift-hint">–ó–∞–±–µ—Ä–∏—Ç–µ –¥–æ –≤–∑—Ä—ã–≤–∞!</div>
        </div>
      </div>
    </div>

    <!-- ===== BET PANEL ===== -->
    <div class="bet-panel" id="betPanel">
      <div class="bet-input-row">
        <div class="bet-input-group">
          <label>–°—Ç–∞–≤–∫–∞ (TON)</label>
          <div class="bet-input-wrap">
            <button class="bet-adjust" id="betHalf">¬Ω</button>
            <input type="number" id="betAmount" value="1" min="0.1" max="1000" step="0.1">
            <button class="bet-adjust" id="betDouble">2x</button>
          </div>
        </div>
        <div class="bet-input-group">
          <label>–ê–≤—Ç–æ-–∫—ç—à–∞—É—Ç</label>
          <div class="bet-input-wrap">
            <input type="number" id="autoCashout" value="" min="1.01" max="50" step="0.1" placeholder="‚Äî">
            <span class="input-suffix">x</span>
          </div>
        </div>
      </div>
      <div class="bet-quick-amounts">
        <button class="quick-bet" data-amount="0.5">0.5</button>
        <button class="quick-bet" data-amount="1">1</button>
        <button class="quick-bet" data-amount="5">5</button>
        <button class="quick-bet" data-amount="10">10</button>
        <button class="quick-bet" data-amount="50">50</button>
        <button class="quick-bet" data-amount="100">100</button>
      </div>
      <button class="btn-action btn-bet" id="btnBet">
        –°–¢–ê–í–ö–ê
      </button>
      <button class="btn-action btn-cashout" id="btnCashout" style="display:none">
        –ó–ê–ë–†–ê–¢–¨ <span id="cashoutAmount">0.00</span> TON
      </button>
    </div>

    <!-- ===== PLAYERS LIST ===== -->
    <div class="players-section">
      <div class="section-header">
        <span>üë• –ò–≥—Ä–æ–∫–∏</span>
        <span class="players-count" id="playersCount">0</span>
      </div>
      <div class="players-list" id="playersList">
        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>

    <!-- ===== BOTTOM NAV ===== -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-tab="game" id="navGame">
        <span class="nav-icon">üéÆ</span>
        <span class="nav-label">–ò–≥—Ä–∞</span>
      </button>
      <button class="nav-btn" data-tab="deposit" id="navDeposit">
        <span class="nav-icon">üí≥</span>
        <span class="nav-label">–î–µ–ø–æ–∑–∏—Ç</span>
      </button>
      <button class="nav-btn" data-tab="withdraw" id="navWithdraw">
        <span class="nav-icon">üéÅ</span>
        <span class="nav-label">–í—ã–≤–æ–¥</span>
      </button>
      <button class="nav-btn" data-tab="profile" id="navProfile">
        <span class="nav-icon">üë§</span>
        <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
      </button>
    </nav>

    <!-- ===== DEPOSIT MODAL ===== -->
    <div class="modal" id="depositModal" style="display:none">
      <div class="modal-backdrop" data-close="depositModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
          <button class="modal-close" data-close="depositModal">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="deposit-methods">
            <!-- 1. Telegram Gifts -->
            <div class="deposit-card" id="depositGift">
              <div class="deposit-icon">üéÅ</div>
              <div class="deposit-info">
                <h3>Telegram –ü–æ–¥–∞—Ä–∫–∏ (NFT)</h3>
                <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ NFT –ø–æ–¥–∞—Ä–æ–∫ –±–æ—Ç—É</p>
              </div>
              <span class="arrow">‚Ä∫</span>
            </div>
            
            <!-- 2. Crypto Wallet -->
            <div class="deposit-card" id="depositWallet">
              <div class="deposit-icon">üëõ</div>
              <div class="deposit-info">
                <h3>–ö—Ä–∏–ø—Ç–æ –ö–æ—à–µ–ª—ë–∫</h3>
                <p>TON, USDT, BTC, ETH, SOL</p>
              </div>
              <span class="arrow">‚Ä∫</span>
            </div>
            
            <!-- 3. CryptoBot -->
            <div class="deposit-card" id="depositCryptoBot">
              <div class="deposit-icon">ü§ñ</div>
              <div class="deposit-info">
                <h3>CryptoBot</h3>
                <p>–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ—Ä–µ–∑ @CryptoBot</p>
              </div>
              <span class="arrow">‚Ä∫</span>
            </div>
            
            <!-- 4. Telegram Stars -->
            <div class="deposit-card" id="depositStars">
              <div class="deposit-icon">‚≠ê</div>
              <div class="deposit-info">
                <h3>Telegram Stars</h3>
                <p>–û–ø–ª–∞—Ç–∞ –∑–≤—ë–∑–¥–∞–º–∏ Telegram</p>
              </div>
              <span class="arrow">‚Ä∫</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== DEPOSIT FORM MODAL ===== -->
    <div class="modal" id="depositFormModal" style="display:none">
      <div class="modal-backdrop" data-close="depositFormModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <button class="modal-back" id="depositFormBack">‚Üê</button>
          <h2 id="depositFormTitle">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
          <button class="modal-close" data-close="depositFormModal">‚úï</button>
        </div>
        <div class="modal-body" id="depositFormBody">
          <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
      </div>
    </div>

    <!-- ===== WITHDRAW MODAL ===== -->
    <div class="modal" id="withdrawModal" style="display:none">
      <div class="modal-backdrop" data-close="withdrawModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>üéÅ –í—ã–≤–æ–¥ –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
          <button class="modal-close" data-close="withdrawModal">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="withdraw-notice">
            <p>‚ö†Ô∏è –í—ã–≤–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω <strong>—Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ Telegram NFT –ø–æ–¥–∞—Ä–∫–æ–≤</strong>, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –≤ –∏–≥—Ä–µ.</p>
            <p>–î–µ–Ω—å–≥–∏ –∏ –∫—Ä–∏–ø—Ç–∞ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è.</p>
          </div>
          <div class="gifts-list" id="giftsList">
            <div class="empty-state">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–∞—Ä–∫–æ–≤. –ò–≥—Ä–∞–π—Ç–µ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ!</div>
          </div>
          <div class="withdraw-history">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤</h3>
            <div id="withdrawHistory" class="history-list">
              <div class="empty-state">–ü—É—Å—Ç–æ</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PROFILE MODAL ===== -->
    <div class="modal" id="profileModal" style="display:none">
      <div class="modal-backdrop" data-close="profileModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
          <button class="modal-close" data-close="profileModal">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="profile-card">
            <div class="profile-avatar" id="profileAvatar">üë§</div>
            <div class="profile-name" id="profileName">–ò–≥—Ä–æ–∫</div>
            <div class="profile-id" id="profileId">ID: ‚Äî</div>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="statBalance">0.00</div>
              <div class="stat-label">–ë–∞–ª–∞–Ω—Å (TON)</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statDeposited">0.00</div>
              <div class="stat-label">–í–Ω–µ—Å–µ–Ω–æ</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statWagered">0.00</div>
              <div class="stat-label">–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statWon">0.00</div>
              <div class="stat-label">–í—ã–∏–≥—Ä–∞–Ω–æ</div>
            </div>
          </div>
          <div class="wallet-section">
            <h3>üëõ –ö—Ä–∏–ø—Ç–æ –∫–æ—à–µ–ª—ë–∫</h3>
            <div class="wallet-input-wrap">
              <input type="text" id="walletInput" placeholder="–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ (TON, EVM...)" />
              <button class="btn-connect-wallet" id="btnConnectWallet">–ü—Ä–∏–≤—è–∑–∞—Ç—å</button>
            </div>
            <div class="wallet-connected" id="walletConnected" style="display:none">
              ‚úÖ <span id="walletAddress"></span>
            </div>
          </div>
          <div class="bet-history-section">
            <h3>üìú –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫</h3>
            <div id="betHistory" class="history-list">
              <div class="empty-state">–ü—É—Å—Ç–æ</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== TOAST ===== -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- ===== WIN POPUP ===== -->
    <div class="win-popup" id="winPopup" style="display:none">
      <div class="win-popup-content">
        <div class="win-emoji">üèÜ</div>
        <div class="win-title">–í–´–ò–ì–†–´–®!</div>
        <div class="win-amount" id="winAmount">+0.00 TON</div>
        <div class="win-gift" id="winGift" style="display:none">
          <div class="win-gift-name" id="winGiftName">üéÅ –ü–æ–¥–∞—Ä–æ–∫</div>
        </div>
        <div class="win-multiplier" id="winMultiplier">1.00x</div>
        <button class="btn-action" id="winClose">–û–¢–õ–ò–ß–ù–û!</button>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
