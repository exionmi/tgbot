<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0a1a">
  <title>üöÄ Crash Rocket</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div id="app">
    <!-- ===== HEADER ===== -->
    <header class="header">
      <div class="header-left">
        <div class="logo">üöÄ CRASH</div>
      </div>
      <div class="header-right">
        <div class="balance-box" id="balanceBox">
          <span class="balance-icon">üí∞</span>
          <span class="balance-amount" id="balanceAmount">0.00</span>
          <span class="balance-currency">TON</span>
        </div>
        <button class="btn-deposit" id="btnOpenDeposit">+</button>
      </div>
    </header>

    <!-- ===== HISTORY BAR ===== -->
    <div class="history-bar" id="historyBar"></div>

    <!-- ===== GAME CANVAS ===== -->
    <div class="game-container">
      <canvas id="gameCanvas"></canvas>
      <div class="game-overlay" id="gameOverlay">
        <div class="multiplier-display" id="multiplierDisplay">
          <span class="multiplier-value" id="multiplierValue">1.00</span>
          <span class="multiplier-x">x</span>
        </div>
        <div class="game-status" id="gameStatus">–û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫...</div>
        <div class="countdown" id="countdown" style="display:none">
          <span id="countdownValue">5</span>
        </div>
      </div>
      <div class="gift-preview" id="giftPreview" style="display:none">
        <div class="gift-preview-content">
          <div class="gift-emoji" id="giftEmoji">üéÅ</div>
          <div class="gift-name" id="giftName">Gift Name</div>
          <div class="gift-hint">–ó–∞–±–µ—Ä–∏—Ç–µ –¥–æ –≤–∑—Ä—ã–≤–∞!</div>
        </div>
      </div>
    </div>

    <!-- ===== BET PANEL ===== -->
    <div class="bet-panel" id="betPanel">
      <div class="bet-input-row">
        <div class="bet-input-group">
          <label>–°—Ç–∞–≤–∫–∞ (TON)</label>
          <div class="bet-input-wrap">
            <button class="bet-adjust" id="betHalf">¬Ω</button>
            <input type="number" id="betAmount" value="1" min="0.1" max="1000" step="0.1">
            <button class="bet-adjust" id="betDouble">2x</button>
          </div>
        </div>
        <div class="bet-input-group">
          <label>–ê–≤—Ç–æ-–∫—ç—à–∞—É—Ç</label>
          <div class="bet-input-wrap">
            <input type="number" id="autoCashout" value="" min="1.01" max="50" step="0.1" placeholder="‚Äî">
            <span class="input-suffix">x</span>
          </div>
        </div>
      </div>
      <div class="bet-quick-amounts">
        <button class="quick-bet" data-amount="0.5">0.5</button>
        <button class="quick-bet" data-amount="1">1</button>
        <button class="quick-bet" data-amount="5">5</button>
        <button class="quick-bet" data-amount="10">10</button>
        <button class="quick-bet" data-amount="50">50</button>
        <button class="quick-bet" data-amount="100">100</button>
      </div>
      <button class="btn-action btn-bet" id="btnBet">–°–¢–ê–í–ö–ê</button>
      <button class="btn-action btn-cashout" id="btnCashout" style="display:none">
        –ó–ê–ë–†–ê–¢–¨ <span id="cashoutAmount">0.00</span> TON
      </button>
    </div>

    <!-- ===== PLAYERS LIST ===== -->
    <div class="players-section">
      <div class="section-header">
        <span>üë• –ò–≥—Ä–æ–∫–∏</span>
        <span class="players-count" id="playersCount">0</span>
      </div>
      <div class="players-list" id="playersList"></div>
    </div>

    <!-- ===== BOTTOM NAV ===== -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-tab="game" id="navGame">
        <span class="nav-icon">üéÆ</span>
        <span class="nav-label">–ò–≥—Ä–∞</span>
      </button>
      <button class="nav-btn" data-tab="deposit" id="navDeposit">
        <span class="nav-icon">üí≥</span>
        <span class="nav-label">–î–µ–ø–æ–∑–∏—Ç</span>
      </button>
      <button class="nav-btn" data-tab="withdraw" id="navWithdraw">
        <span class="nav-icon">üéÅ</span>
        <span class="nav-label">–í—ã–≤–æ–¥</span>
      </button>
      <button class="nav-btn" data-tab="profile" id="navProfile">
        <span class="nav-icon">üë§</span>
        <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
      </button>
    </nav>

    <!-- ===== DEPOSIT MODAL (CryptoBot only) ===== -->
    <div class="modal" id="depositModal" style="display:none">
      <div class="modal-backdrop" data-close="depositModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CryptoBot</h2>
          <button class="modal-close" data-close="depositModal">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="deposit-form">
            <div class="form-group">
              <label>–í–∞–ª—é—Ç–∞</label>
              <select class="form-select" id="dfCurrency">
                <option value="TON">TON</option>
                <option value="USDT">USDT</option>
                <option value="BTC">BTC</option>
                <option value="ETH">ETH</option>
              </select>
            </div>
            <div class="form-group">
              <label>–°—É–º–º–∞</label>
              <input type="number" class="form-input" id="dfAmount" placeholder="10" min="0.1" step="0.1">
            </div>
            <div class="bet-quick-amounts" style="margin: 10px 0">
              <button class="quick-deposit" onclick="document.getElementById('dfAmount').value=1">1</button>
              <button class="quick-deposit" onclick="document.getElementById('dfAmount').value=5">5</button>
              <button class="quick-deposit" onclick="document.getElementById('dfAmount').value=10">10</button>
              <button class="quick-deposit" onclick="document.getElementById('dfAmount').value=50">50</button>
              <button class="quick-deposit" onclick="document.getElementById('dfAmount').value=100">100</button>
            </div>
            <div class="form-hint">
              ü§ñ –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏–Ω–≤–æ–π—Å –≤ @CryptoBot. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –±–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
            </div>
            <button class="btn-submit" id="btnCreateInvoice">–°–û–ó–î–ê–¢–¨ –ò–ù–í–û–ô–°</button>
            
            <!-- –°—Ç–∞—Ç—É—Å –æ–∂–∏–¥–∞–Ω–∏—è –æ–ø–ª–∞—Ç—ã -->
            <div class="payment-status" id="paymentStatus" style="display:none">
              <div class="payment-spinner">‚è≥</div>
              <div class="payment-text" id="paymentText">–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã...</div>
              <button class="btn-check-payment" id="btnCheckPayment">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>
            </div>
          </div>

          <!-- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤ -->
          <div class="deposit-history" style="margin-top: 16px">
            <h3 style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px">üìú –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç—ã</h3>
            <div id="depositHistory" class="history-list">
              <div class="empty-state">–ü—É—Å—Ç–æ</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== WITHDRAW MODAL ===== -->
    <div class="modal" id="withdrawModal" style="display:none">
      <div class="modal-backdrop" data-close="withdrawModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>üéÅ –í—ã–≤–æ–¥ –ø–æ–¥–∞—Ä–∫–∞–º–∏</h2>
          <button class="modal-close" data-close="withdrawModal">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="withdraw-notice">
            <p>üí° –í—ã–≤–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω <strong>—Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ Telegram –ø–æ–¥–∞—Ä–∫–æ–≤</strong>.</p>
            <p>–ü–æ–¥–∞—Ä–∫–∏ –º–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä–µ –∏–ª–∏ –∫—É–ø–∏—Ç—å –∑–∞ –±–∞–ª–∞–Ω—Å.</p>
          </div>

          <!-- Tabs -->
          <div class="withdraw-tabs">
            <button class="wtab active" data-wtab="won" id="wtabWon">üèÜ –í—ã–∏–≥—Ä–∞–Ω–Ω—ã–µ</button>
            <button class="wtab" data-wtab="shop" id="wtabShop">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
            <button class="wtab" data-wtab="history" id="wtabHistory">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
          </div>

          <!-- –í—ã–∏–≥—Ä–∞–Ω–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ -->
          <div class="wtab-content active" id="wtabContentWon">
            <div class="gifts-list" id="giftsList">
              <div class="empty-state">–í—ã–∏–≥—Ä–∞–π—Ç–µ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ 3x+ –≤ –∏–≥—Ä–µ! üöÄ</div>
            </div>
          </div>

          <!-- –ú–∞–≥–∞–∑–∏–Ω –ø–æ–¥–∞—Ä–∫–æ–≤ -->
          <div class="wtab-content" id="wtabContentShop">
            <div class="shop-balance">
              –í–∞—à –±–∞–ª–∞–Ω—Å: <span id="shopBalance">0.00</span> TON
            </div>
            <div class="gift-catalog" id="giftCatalog"></div>
          </div>

          <!-- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤ -->
          <div class="wtab-content" id="wtabContentHistory">
            <div id="withdrawHistory" class="history-list">
              <div class="empty-state">–ü—É—Å—Ç–æ</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PROFILE MODAL ===== -->
    <div class="modal" id="profileModal" style="display:none">
      <div class="modal-backdrop" data-close="profileModal"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
          <button class="modal-close" data-close="profileModal">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="profile-card">
            <div class="profile-avatar" id="profileAvatar">üë§</div>
            <div class="profile-name" id="profileName">–ò–≥—Ä–æ–∫</div>
            <div class="profile-id" id="profileId">ID: ‚Äî</div>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="statBalance">0.00</div>
              <div class="stat-label">–ë–∞–ª–∞–Ω—Å (TON)</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statDeposited">0.00</div>
              <div class="stat-label">–í–Ω–µ—Å–µ–Ω–æ</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statWagered">0.00</div>
              <div class="stat-label">–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statWon">0.00</div>
              <div class="stat-label">–í—ã–∏–≥—Ä–∞–Ω–æ</div>
            </div>
          </div>
          <div class="bet-history-section">
            <h3>üìú –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫</h3>
            <div id="betHistory" class="history-list">
              <div class="empty-state">–ü—É—Å—Ç–æ</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== TOAST ===== -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- ===== WIN POPUP ===== -->
    <div class="win-popup" id="winPopup" style="display:none">
      <div class="win-popup-content">
        <div class="win-emoji">üèÜ</div>
        <div class="win-title">–í–´–ò–ì–†–´–®!</div>
        <div class="win-amount" id="winAmount">+0.00 TON</div>
        <div class="win-gift" id="winGift" style="display:none">
          <div class="win-gift-name" id="winGiftName">üéÅ –ü–æ–¥–∞—Ä–æ–∫</div>
        </div>
        <div class="win-multiplier" id="winMultiplier">1.00x</div>
        <button class="btn-action" id="winClose">–û–¢–õ–ò–ß–ù–û!</button>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
